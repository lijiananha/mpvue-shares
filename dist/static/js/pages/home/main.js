global.webpackJsonp([4],{FP3a:function(t,e,a){"use strict";var i=a("pZ1I"),s=a("LoVn");var n=function(t){a("LL6h")},o=a("ybqe")(i.a,s.a,n,"data-v-51a5663d",null);e.a=o.exports},LL6h:function(t,e){},LoVn:function(t,e,a){"use strict";var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container skeletons"},[a("swiper",{directives:[{name:"show",rawName:"v-show",value:t.is_complete&&3!==t.imgList.length,expression:"is_complete&&imgList.length!==3"}],staticClass:"card-swiper square-dot skeletons-rect",attrs:{"indicator-dots":"true",circular:"true",autoplay:"true",interval:"5000",duration:"500","indicator-color":"#8799a3","indicator-active-color":"#0081ff",eventid:"1"},on:{change:t.cardSwiper}},t._l(t.imgList,function(e,i){return a("swiper-item",{key:i,class:t.cardCur==i?"cur":"",attrs:{mpcomid:"0-"+i}},[a("image",{staticClass:"bg-img shadow-blur set-bg",class:"set-bg"+i,attrs:{src:e,alt:"",mode:"aspectFit",eventid:"0-"+i},on:{click:function(e){t.goBanner(i)}}})])})),t._v(" "),a("scroll-view",{directives:[{name:"show",rawName:"v-show",value:t.is_complete&&3!==t.imgList.length,expression:"is_complete&&imgList.length!==3"}],staticClass:"bg-white nav css-sticky",attrs:{"scroll-x":""}},[a("div",{staticClass:"flex text-center skeletons-rect"},t._l(t.tabList,function(e,i){return a("div",{key:i,staticClass:"cu-item flex-sub",class:i==t.TabCur?"text-orange cur":"",attrs:{"data-id":i,eventid:"2-"+i},on:{tap:t.tabSelect}},[t._v("\n        "+t._s(e)+"\n      ")])}))]),t._v(" "),3!==t.imgList.length?a("section",t._l(t.newsList,function(e,i){return a("div",{key:i,staticClass:"cu-card article no-card border-top skeletons-rect",attrs:{eventid:"3-"+i},on:{click:function(a){t.goDetail(e)}}},[a("div",{staticClass:"cu-item shadow"},[a("div",{staticClass:"title"},[a("div",{staticClass:"text-cut"},[t._v(t._s(e.resource.title))])]),t._v(" "),a("div",{staticClass:"content"},[a("image",{class:[e.resource.show?"active":"","imgItem"+i],attrs:{src:e.resource.show?e.resource.image_uri:"https://image.weilanwl.com/gif/wave.gif",mode:"aspectFill"}}),t._v(" "),a("div",{staticClass:"desc"},[a("div",{staticClass:"text-content"},[t._v(t._s(e.resource.content_short))]),t._v(" "),a("div")])])])])})):a("section",[a("view",{staticClass:"cu-bar bg-white solid-bottom"},[a("view",{staticClass:"action"},[a("text",{staticClass:"icon-title text-blue"}),t._v("今日\n      ")])]),t._v(" "),a("view",{staticClass:"grid col-3 padding-sm"}),t._v(" "),a("view",{staticClass:"dailyForecast"},t._l(t.futureWeather,function(e,i){return a("view",{key:i,staticStyle:{display:"block"}},[a("view",{staticClass:"daily",staticStyle:{"flex-direction":"row"}},[a("view",{staticClass:"dailyDate"},[t._v(t._s(e.date))]),t._v(" "),a("image",{staticClass:"dailyImg",attrs:{src:e.dayPictureUrl,mode:"aspectFit"}}),t._v(" "),a("view",{staticClass:"dailyCond"},[t._v(t._s(e.weather))]),t._v(" "),a("view",{staticClass:"dailyTmp"},[t._v(t._s(e.temperature))])])])}))]),t._v(" "),a("skeletons",{attrs:{is_capture_nodes:t.is_capture_nodes,is_complete:t.is_complete,loading:"music",block_animation:"shine",selector:"skeletons",background:"#fff",mpcomid:"1"}})],1)},staticRenderFns:[]};e.a=i},dmGr:function(t,e,a){"use strict";var i=a("C4MV"),s=a.n(i);var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),s()(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),o=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.ak=e.ak}return n(t,[{key:"getWXLocation",value:function(t,e,a,i){t=t||"gcj02",e=e||function(){},a=a||function(){},i=i||function(){},wx.getLocation({type:t,success:e,fail:a,complete:i})}},{key:"search",value:function(t){var e={query:(t=t||{}).query||"生活服务$美食&酒店",scope:t.scope||1,filter:t.filter||"",coord_type:t.coord_type||2,page_size:t.page_size||10,page_num:t.page_num||0,output:t.output||"json",ak:this.ak,sn:t.sn||"",timestamp:t.timestamp||"",radius:t.radius||2e3,ret_coordtype:"gcj02ll"},a={iconPath:t.iconPath,iconTapPath:t.iconTapPath,width:t.width,height:t.height,alpha:t.alpha||1,success:t.success||function(){},fail:t.fail||function(){}},i=function(t){e.location=t.latitude+","+t.longitude,wx.request({url:"https://api.map.baidu.com/place/v2/search",data:e,header:{"content-type":"application/json"},method:"GET",success:function(t){var e=t.data;if(0===e.status){var i=e.results,s={};s.originalData=e,s.wxMarkerData=[];for(var n=0;n<i.length;n++)s.wxMarkerData[n]={id:n,latitude:i[n].location.lat,longitude:i[n].location.lng,title:i[n].name,iconPath:a.iconPath,iconTapPath:a.iconTapPath,address:i[n].address,telephone:i[n].telephone,alpha:a.alpha,width:a.width,height:a.height};a.success(s)}else a.fail({errMsg:e.message,statusCode:e.status})},fail:function(t){a.fail(t)}})};if(t.location){var s=t.location.split(",")[1];i({errMsg:"input location",latitude:t.location.split(",")[0],longitude:s})}else this.getWXLocation("gcj02",i,function(t){a.fail(t)},function(){})}},{key:"suggestion",value:function(t){var e={query:(t=t||{}).query||"",region:t.region||"全国",city_limit:t.city_limit||!1,output:t.output||"json",ak:this.ak,sn:t.sn||"",timestamp:t.timestamp||"",ret_coordtype:"gcj02ll"},a={success:t.success||function(){},fail:t.fail||function(){}};wx.request({url:"https://api.map.baidu.com/place/v2/suggestion",data:e,header:{"content-type":"application/json"},method:"GET",success:function(t){var e=t.data;0===e.status?a.success(e):a.fail({errMsg:e.message,statusCode:e.status})},fail:function(t){a.fail(t)}})}},{key:"regeocoding",value:function(t){var e={coordtype:(t=t||{}).coordtype||"gcj02ll",pois:t.pois||0,output:t.output||"json",ak:this.ak,sn:t.sn||"",timestamp:t.timestamp||"",ret_coordtype:"gcj02ll"},a={iconPath:t.iconPath,iconTapPath:t.iconTapPath,width:t.width,height:t.height,alpha:t.alpha||1,success:t.success||function(){},fail:t.fail||function(){}},i=function(t){e.location=t.latitude+","+t.longitude,wx.request({url:"https://api.map.baidu.com/geocoder/v2/",data:e,header:{"content-type":"application/json"},method:"GET",success:function(e){var i=e.data;if(0===i.status){var s=i.result,n={};n.originalData=i,n.wxMarkerData=[],n.wxMarkerData[0]={id:0,latitude:t.latitude,longitude:t.longitude,address:s.formatted_address,iconPath:a.iconPath,iconTapPath:a.iconTapPath,desc:s.sematic_description,business:s.business,alpha:a.alpha,width:a.width,height:a.height},a.success(n)}else a.fail({errMsg:i.message,statusCode:i.status})},fail:function(t){a.fail(t)}})};if(t.location){var s=t.location.split(",")[1];i({errMsg:"input location",latitude:t.location.split(",")[0],longitude:s})}else this.getWXLocation("gcj02",i,function(t){a.fail(t)},function(){})}},{key:"weather",value:function(t){var e={coord_type:(t=t||{}).coord_type||"gcj02",output:t.output||"json",ak:this.ak,sn:t.sn||"",timestamp:t.timestamp||""},a={success:t.success||function(){},fail:t.fail||function(){}},i=function(t){e.location=t.longitude+","+t.latitude,wx.request({url:"https://api.map.baidu.com/telematics/v3/weather",data:e,header:{"content-type":"application/json"},method:"GET",success:function(t){var e=t.data;if(0===e.error&&"success"===e.status){var i=e.results,s={};s.originalData=e,s.currentWeather=[],s.currentWeather[0]={currentCity:i[0].currentCity,pm25:i[0].pm25,date:i[0].weather_data[0].date,temperature:i[0].weather_data[0].temperature,weatherDesc:i[0].weather_data[0].weather,wind:i[0].weather_data[0].wind},a.success(s)}else a.fail({errMsg:e.message,statusCode:e.status})},fail:function(t){a.fail(t)}})};if(t.location){var s=t.location.split(",")[0];i({errMsg:"input location",latitude:t.location.split(",")[1],longitude:s})}else this.getWXLocation("gcj02",i,function(t){a.fail(t)},function(){})}}]),t}();e.a=o},pZ1I:function(t,e,a){"use strict";a("7YlJ");var i=a("dmGr");e.a={data:function(){return{futureWeather:[],ColorList:[{title:"黄金价格",name:"red",color:"#e54d42",value:"287.2"},{title:"港币汇率",name:"orange",color:"#f37b1d",value:"0.8809"},{title:"深圳房价",name:"olive",color:"#8dc63f",value:"58563"}],dateData:[],is_capture_nodes:!1,is_complete:!1,listData:[],cardCur:0,imgList:[],initTime:"",tabList:["推荐","精选","国内","日历","股市直播"],TabCur:0,scrollLeft:0,newsList:[{resource:""},{resource:""},{resource:""},{resource:""},{resource:""},{resource:""}]}},methods:{goBanner:function(t){3!==this.imgList.length&&this.goDetail(t,"banner")},getBanner:function(){var t=this,e=wx.cloud.database().collection("banner");this.is_capture_nodes=!0,e.get().then(function(e){t.imgList=e.data[0].list||[],3===t.imgList.length&&t.loadWeather(),t.is_complete=!0}).catch(function(e){return t.is_complete=!0})},cardSwiper:function(t){this.cardCur=t.mp.detail.current},tabSelect:function(t){if(0==t.currentTarget.dataset.id)this.TabCur=t.currentTarget.dataset.id;else{var e="../news/main?tabCur="+t.currentTarget.dataset.id;wx.navigateTo({url:e})}},getNews:function(){var t=this;wx.cloud.callFunction({name:"reptile",data:{type:"getNews",limit:20,cursor:"",channel:"wscn-free",accept:"article,newsroom,morning-report,newsrooms,live,calendar,audition,wits-home-users,hot-themes,vote-interactive,discuss-interactive,ad.internal_banner.inhouse,ad.internal_inline.inhouse,ad.inline.inhouse,ad.video.inhouse,ad.banner.inhouse,ad.inline.plista,ad.banner.plista,ad.topic.inhouse,ad.inline.tanx"}}).then(function(e){var a=e.result.home.data.items||[];t.newsList=a,t.newsList.forEach(function(t,e){return t.resource.show=e<=1}),t.getLazyImg()}).catch(function(t){console.log(t)})},goDetail:function(t,e){var a=void 0;a="banner"===e?"../details/main?type="+e+"&id="+t:"../details/main?id="+t.resource.id,wx.navigateTo({url:a})},getLazyImg:function(){var t=this;setTimeout(function(){var e=function(e){var a=".imgItem"+e;wx.createIntersectionObserver().relativeToViewport({bottom:20}).observe(a,function(a){a.intersectionRatio>0&&(t.newsList[e].resource.show=!0)})};for(var a in t.newsList)e(a)},2e3)},loadWeather:function(){var t=this,e=new i.a({ak:"gGpLpLOSIGme81xiRacyTc5VWxfY3Gka"});e.weather({fail:function(t){console.log(t)},success:function(e){console.log("jinru",e);var a=e.originalData.results[0].weather_data;t.futureWeather=a,t.futureWeather[0].date="今天"}}),e.regeocoding({fail:function(t){console.log(t)},success:function(t){}})}},onLoad:function(){this.getBanner(),this.getNews()}}},usrL:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("5nAL"),s=a.n(i),n=a("FP3a");new s.a(n.a).$mount(),e.default={config:{navigationBarTitleText:"韭菜日历",usingComponents:{skeletons:"/static/components/component/skeletons/index"}}}}},["usrL"]);